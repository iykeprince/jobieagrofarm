(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{4659:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/orders",function(){return s(3374)}])},143:function(e,t,s){"use strict";var a=s(5893),r=s(1664),l=s.n(r),n=s(6794),c=s.n(n);let i=e=>{let{disabled:t,link:s,to:r,className:n,onClick:i,children:d}=e;return s?(0,a.jsx)(l(),{href:r,className:" ".concat(n," "),children:(0,a.jsx)("span",{children:d})}):(0,a.jsx)("button",{disabled:t,onClick:i,className:" ".concat(n," ").concat(c().button),children:d})};t.Z=i},6267:function(e,t,s){"use strict";var a=s(5893),r=s(7294),l=s(3935),n=s(8193),c=s(5349),i=s.n(c);let d=e=>(0,a.jsx)("div",{onClick:e.onClick,className:i().backdrop}),o=e=>{let{children:t,onClick:s}=e;return(0,a.jsxs)("div",{className:i().overlay,children:[(0,a.jsx)(n.SV5,{className:i().close__icon,onClick:s}),(0,a.jsx)("div",{children:t})]})},h=e=>(0,a.jsxs)(r.Fragment,{children:[l.createPortal((0,a.jsx)(d,{onClick:e.onClick}),document.getElementById("modal-root")),l.createPortal((0,a.jsx)(o,{onClick:e.onClick,children:e.children}),document.getElementById("modal-root"))]});t.Z=h},1596:function(e,t,s){"use strict";var a=s(5893),r=s(7294);let l=e=>{let t=e.productsPerPage,s=e.totalProducts,l=Math.ceil(s/t),[n,c]=(0,r.useState)(1),i=()=>{1!==n&&(c(e=>e-1),e.onChange(n-1))},d=()=>{n!==l&&(c(e=>e+1),e.onChange(n+1))};return(0,a.jsx)("nav",{"aria-label":"Page navigation example",children:(0,a.jsxs)("ul",{class:"pagination justify-content-center",children:[(0,a.jsx)("li",{class:"page-item",onClick:n<=1?null:i,children:(0,a.jsx)("a",{class:"page-link ".concat(n<=1&&"disabled"),href:"#",children:"Previous"})}),Array.from({length:l},(e,t)=>t+1).map(t=>(0,a.jsx)("li",{class:"page-item",onClick(){e.onChange(t),c(e=>t)},children:(0,a.jsx)("a",{class:"page-link",href:"#",children:t})},t)),(0,a.jsx)("li",{class:"page-item",onClick:n>=l?null:d,children:(0,a.jsx)("a",{class:"page-link ".concat(n>l&&"disabled"),href:"#",children:"Next"})})]})})};t.Z=l},3057:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var a=s(5893),r=s(3790),l=s.n(r),n=s(1163),c=s(1664),i=s.n(c),d=s(5697),o=s.n(d);let h=e=>{let{href:t,exact:s,children:r,...l}=e,{pathname:c}=(0,n.useRouter)(),d=s?c===t:c.startsWith(t);return d&&(l.className+=" activeNav"),(0,a.jsx)(i(),{href:t,legacyBehavior:!0,children:(0,a.jsx)("a",{...l,children:r})})};h.propTypes={href:o().string.isRequired,exact:o().bool},h.defaultProps={exact:!1};let u=()=>(0,a.jsxs)("ul",{className:l().nav,children:[(0,a.jsx)("li",{children:(0,a.jsx)(h,{href:"/user",exact:!0,className:l().nav__list,children:"Profile"})}),(0,a.jsx)("li",{className:l().nav__list,children:(0,a.jsx)(h,{href:"/user/orders",exact:!0,className:l().nav__list,children:"Orders"})}),(0,a.jsx)("li",{className:l().nav__list,children:(0,a.jsx)(h,{href:"/user/transactions",exact:!0,className:l().nav__list,children:"Transactions"})})]});var _=u},3374:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(5893),r=s(7294),l=s(4260),n=s(7823),c=s(3057),i=s(9473),d=s(3247),o=s(2583),h=s(4438),u=s(8193),_=s(1652),m=s.n(_),x=s(6267),p=s(5675),j=s.n(p),v=s(375),N=s.n(v);let g=e=>{let{index:t,price:s,image:r,quantity:l,totalPrice:n}=e;return(0,a.jsxs)("tr",{className:N().tr,children:[(0,a.jsx)("td",{className:N().td,children:"".concat(t).padStart(2,0)})," ",(0,a.jsx)("td",{className:N().image,children:(0,a.jsx)(j(),{src:r,alt:"cart",width:40,height:40})}),(0,a.jsx)("td",{className:N().td,children:l}),(0,a.jsxs)("td",{className:N().td,children:["₦",s]}),(0,a.jsxs)("td",{className:N().td,children:["₦",n]})]})},f=e=>{let{carts:t,totalAmount:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("ul",{className:N().ul,children:[(0,a.jsxs)("table",{className:"".concat(N().table),children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:N().tr,children:[(0,a.jsx)("th",{className:N().th,children:"S/N"}),(0,a.jsx)("th",{className:N().th,children:"Image"}),(0,a.jsx)("th",{className:N().th,children:"Quantity"}),(0,a.jsx)("th",{className:N().th,children:"Price"}),(0,a.jsx)("th",{className:N().th,children:"Total Price"})]})}),(0,a.jsxs)("tbody",{children:[(null==t?void 0:t.length)===0&&(0,a.jsx)("p",{className:N().p,children:"Your Cart is empty"}),(null==t?void 0:t.length)>0&&(null==t?void 0:t.map((e,t)=>(0,a.jsx)(g,{index:t+1,price:e.price,quantity:e.quantity,image:e.image,totalPrice:e.totalPrice},t)))]})]}),(null==t?void 0:t.length)>0&&(0,a.jsxs)("p",{className:N().total,children:["Total: ",(0,a.jsxs)("b",{className:N().total__amount,children:["₦",s]})]})]})})},b=e=>{let{id:t,totalQuantity:s,customerName:l,customerEmail:n,customerPhone:c,grandTotal:_,carts:p,paymentStatus:j,orderStatus:v}=e,N=(0,i.I0)(),[g,b]=(0,r.useState)(!1),[y,C]=(0,r.useState)({isChanged:!1,selectedStatus:j}),[S,O]=(0,r.useState)({isChanged:!1,selectedStatus:v}),P=async(e,a)=>{let r=confirm("Do you want to save");if(!r)return;console.log(e,a);let i=(0,d.JU)(o.db,"orders",t);try{await (0,d.r7)(i,{grandTotal:_,customerName:l,customerEmail:n,customerPhone:c,carts:p,totalQuantity:s,paymentStatus:"payment"===a?e:j,orderStatus:"order"===a?e:v});let u=(0,d.hJ)(o.db,"orders"),m=await (0,d.PL)(u),x=m.docs.map(e=>{let t=e.data();return t.id=e.id,t});N(h.a.addOrders({orders:x})),console.log("Document successfully updated!",x),O(e=>({...e,isChanged:!1})),C(e=>({...e,isChanged:!1}))}catch(g){console.error("Error updating document: ",g)}};return(0,a.jsxs)("li",{className:"".concat(m().li),children:[(0,a.jsxs)("p",{children:["Name: ",(0,a.jsx)("span",{children:l})," ",(0,a.jsx)("br",{})]}),(0,a.jsxs)("p",{children:["Email: ",(0,a.jsx)("span",{children:n})," ",(0,a.jsx)("br",{})]}),(0,a.jsxs)("p",{children:["Phone: ",(0,a.jsx)("span",{children:c})]}),(0,a.jsxs)("p",{children:["Quantities: ",s]}),(0,a.jsxs)("p",{children:[" Grand Total: ₦",_]}),(0,a.jsx)("p",{children:(0,a.jsxs)("span",{className:m().span,children:[" ",(0,a.jsxs)("select",{value:y.selectedStatus,onChange(e){C(t=>({isChanged:!0,selectedStatus:e.target.value}))},name:"payment",id:"payment",className:m().select,children:[(0,a.jsx)("option",{value:"Paid",children:"Paid"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"})]}),y.isChanged&&(0,a.jsx)(u.JMf,{className:m().icon,onClick:()=>P(y.selectedStatus,"payment")})]})}),(0,a.jsx)("p",{children:(0,a.jsxs)("span",{className:m().span,children:[(0,a.jsxs)("select",{value:S.selectedStatus,onChange(e){O(t=>({isChanged:!0,selectedStatus:e.target.value}))},name:"order",id:"order",className:m().select,children:[(0,a.jsx)("option",{value:"Delivered",children:"Delivered"}),(0,a.jsx)("option",{value:"Not Delivered",children:" Not Delivered"}),(0,a.jsx)("option",{value:"Shipped",children:" Shipped"})]}),S.isChanged&&(0,a.jsx)(u.JMf,{className:m().icon,onClick:()=>P(S.selectedStatus,"payment")})]})}),(0,a.jsx)("p",{children:(0,a.jsx)("p",{onClick:()=>b(!0),className:m().action,children:"View"})}),!0===g?(0,a.jsx)(x.Z,{onClick:()=>b(!1),children:(0,a.jsx)(f,{carts:p,totalAmount:_})}):""]})},y=e=>{let{id:t,totalQuantity:s,customerName:l,customerEmail:n,customerPhone:c,grandTotal:d,carts:o,paymentStatus:h,orderStatus:u}=e;(0,i.I0)();let[_,p]=(0,r.useState)(!1);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("tr",{className:m().tr,children:[(0,a.jsxs)("td",{className:m().td,children:[(0,a.jsx)("span",{children:l})," ",(0,a.jsx)("br",{})," ",(0,a.jsx)("span",{children:n})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:c})]}),(0,a.jsx)("td",{className:m().td,children:s}),(0,a.jsxs)("td",{className:m().td,children:["₦",d]}),(0,a.jsx)("td",{className:m().td,children:h}),(0,a.jsx)("td",{className:m().td,children:u}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{onClick:()=>p(!0),className:m().action,children:"View"})}),!0===_?(0,a.jsx)(x.Z,{onClick:()=>p(!1),children:(0,a.jsx)(f,{carts:o,totalAmount:d})}):""]})})};var C=s(143),S=s(7086),O=s.n(S);let P=()=>{let[e,t]=(0,r.useState)({order:"All",payment:"All"}),s=(0,i.I0)(),l=t=>{t.preventDefault();let{type:a,order:r,payment:l}=e;s(h.a.filterOrders({order:r,payment:l}))},n=e=>{t(t=>({...t,order:e.target.value}))},c=e=>{t(t=>({...t,payment:e.target.value}))};return(0,a.jsxs)("form",{className:O().form,onSubmit:l,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:O().select__label,children:["Select Payment Status:",(0,a.jsxs)("select",{value:e.payment,onChange:c,className:O().select,children:[(0,a.jsx)("option",{value:"All",children:"All"}),(0,a.jsx)("option",{value:"Paid",children:"Paid"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:O().select__label,children:["Select Order Status:",(0,a.jsxs)("select",{value:e.order,onChange:n,className:O().select,children:[(0,a.jsx)("option",{value:"All",children:"All"}),(0,a.jsx)("option",{value:"Not Delivered",children:"Not Delivered"}),(0,a.jsx)("option",{value:"Shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"Delivered",children:"Delivered"})]})]})}),(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{type:"submit",className:O().button,children:"Filter"})})]})};var k=s(1596);let w=()=>{let{orders:e,filteredOrders:t,noOrder:s}=(0,i.v9)(e=>e.products),l=t.length>0?t:e;console.log(t);let[n,c]=(0,r.useState)(0),d=n+2,o=e=>{c(t=>2*e-2)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:m().top,children:[(0,a.jsx)("h3",{className:"display-4 lead",children:"All Orders"}),(0,a.jsx)("div",{className:m().search__box,children:(0,a.jsx)(P,{})})]}),(0,a.jsx)("div",{className:"table-responsive",children:s?(0,a.jsx)("p",{className:m().no_order,children:"No order matched your filtered parameters"}):(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:m().tr,children:[(0,a.jsx)("th",{className:m().th,children:"Biller"}),(0,a.jsx)("th",{className:m().th,children:"Total Quantity"}),(0,a.jsx)("th",{className:m().th,children:"Grand Total"}),(0,a.jsx)("th",{className:m().th,children:"Payment Status"}),(0,a.jsx)("th",{className:m().th,children:"Order Status"}),(0,a.jsx)("th",{className:m().th,children:"Action"})]})}),(0,a.jsx)("tbody",{children:null==l?void 0:l.slice(n,d).map(e=>(0,a.jsx)(y,{id:e.id,totalQuantity:e.totalQuantity,grandTotal:e.grandTotal,carts:e.carts,paymentStatus:e.paymentStatus,orderStatus:e.orderStatus,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone},e.id))})]})}),(0,a.jsx)("ul",{className:"".concat(m().mobile),children:s?(0,a.jsx)("p",{className:m().no_order,children:"No order matched your filtered parameters"}):(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"section-wrapper",children:(0,a.jsx)("div",{className:"row justify-content-center mb-15-none",children:null==l?void 0:l.slice(n,d).map(e=>(0,a.jsx)(b,{id:e.id,totalQuantity:e.totalQuantity,grandTotal:e.grandTotal,carts:e.carts,paymentStatus:e.paymentStatus,orderStatus:e.orderStatus,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone},e.id))})})})}),(0,a.jsx)("div",{className:"my-4",children:!s&&l.length>0&&(0,a.jsx)(k.Z,{totalProducts:l.length,productsPerPage:2,onChange:o})})]})};var E=s(1102),D=s.n(E),A=s(5096);let I=()=>{let{authUser:e}=(0,A.a)(),t=(0,i.I0)();return(0,r.useEffect)(()=>{(async()=>{let s=(0,d.hJ)(o.db,"orders"),a=await (0,d.PL)(s),r=a.docs.map(e=>{let t=e.data();return t.id=e.id,t}),l=r.filter(t=>t.customerEmail===(null==e?void 0:e.email));t(h.a.addOrders({orders:l}))})()},[t,e]),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"p-10"}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:D().head,children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(w,{})]}),(0,a.jsx)(l.Z,{})]})};var U=I},5349:function(e){e.exports={backdrop:"Modal_backdrop__xsPw5",overlay:"Modal_overlay__o4XKP",close__icon:"Modal_close__icon__lbS3K"}},375:function(e){e.exports={ul:"Cart_ul__afybK",table:"Cart_table__XW_He",tr:"Cart_tr__GApuG",image:"Cart_image__xIg3R",th:"Cart_th__9ygoF",td:"Cart_td__KQJLQ",total__amount:"Cart_total__amount__xdY2q",total:"Cart_total__kbz2s"}},1652:function(e){e.exports={desktop:"Orders_desktop__30JIY",mobile:"Orders_mobile__Pisrc",top:"Orders_top__0EGdd",heading:"Orders_heading__8WVmD",search__box:"Orders_search__box__LEugB",table:"Orders_table__OWSxI",tr:"Orders_tr__SyDRK",th:"Orders_th__vwBWB",td:"Orders_td__2XlZu",span:"Orders_span__KdVAP",icon:"Orders_icon__6D5ow",select:"Orders_select__k_o72",h3:"Orders_h3__K__vr",action:"Orders_action__pkb81",ul:"Orders_ul__afKug",li:"Orders_li__gaM18",no__order:"Orders_no__order__m6AEj"}},7086:function(e){e.exports={form:"OrdersSearch_form__U9in_",select__label:"OrdersSearch_select__label__tkh5b",select:"OrdersSearch_select__o2ABD",button:"OrdersSearch_button__2r4fD"}},3790:function(e){e.exports={input__group:"UserInput_input__group__1_9uZ",label:"UserInput_label__hrWpX",input:"UserInput_input__Fc1Bk",nav:"UserInput_nav__HumbZ",nav__list:"UserInput_nav__list__MeSnC"}},1102:function(e){e.exports={head:"User_head__6p2PJ",container:"User_container__X5vad",left:"User_left__cZ35A",icon__box:"User_icon__box__pmjRB",icon:"User_icon__mKO16",profile__details:"User_profile__details__lbNc2",p:"User_p__lt1DB",span:"User_span__maLOu",right:"User_right__YnWrp"}},6794:function(e){e.exports={button:"Button_button__HxzDS"}},8357:function(e,t,s){"use strict";s.d(t,{w_:function(){return i}});var a=s(7294),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),n=function(){return(n=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};function i(e){return function(t){return a.createElement(d,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return a.createElement(t.tag,n({key:s},t.attr),e(t.child))})}(e.child))}}function d(e){var t=function(t){var s,r=e.attr,l=e.size,i=e.title,d=c(e,["attr","size","title"]),o=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:s,style:n(n({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==l?a.createElement(l.Consumer,null,function(e){return t(e)}):t(r)}}},function(e){e.O(0,[617,210,115,667,774,888,179],function(){return e(e.s=4659)}),_N_E=e.O()}]);